"use strict";(self.webpackChunktermmy=self.webpackChunktermmy||[]).push([[331],{5331:(E,p,o)=>{o.r(p),o.d(p,{AccountSettingsModule:()=>Z});var m=o(8723),h=o(8516),d=o(6895),u=o(1494),c=o(4329),t=o(4650),f=o(8262),v=o(2684),w=o(5048),P=o(3681),l=o(5819),C=o(979);function S(a,F){if(1&a){const s=t.EpF();t.TgZ(0,"div")(1,"app-avatar-uploader",2),t.NdJ("uploadEmitter",function(n){t.CHM(s);const i=t.oxw();return t.KtG(i.uploadEmitter(n))}),t.qZA()()}if(2&a){const s=t.oxw();t.xp6(1),t.Q6J("data",s.data)("defaultImage","no-user-profile.png")}}let y=(()=>{class a{constructor(s,e,n,i,r){this._service=s,this._toastr=e,this._messageService=n,this._storageService=i,this._helpService=r,this.path="pages/account-settings",this.file="general.json",this.avatarImage="../../../../../assets/images/portrait/small/avatar-s-11.jpg"}ngOnInit(){this._service.callGetMethod("/api/getProfileInfo","").subscribe(s=>{s&&s.length&&(this.data=s[0])})}submit(s){console.log(s),"submit"!=s.type&&this._service.callPostMethod("api/saveProfileInfo",s).subscribe(e=>{e?(this._toastr.showSuccess(),this.sendInfoForSetupApp()):this._toastr.showError()})}uploadEmitter(s){this._service.callPostMethod("api/uploadUserProfile",s).subscribe(e=>{e?(this._messageService.sendAvatarProfile(e.avatar),this._storageService.setToken(e.token),this._toastr.showSuccess()):this._toastr.showError()})}sendInfoForSetupApp(){if(this._storageService.getSessionStorage("setup")){let s=this._storageService.getSessionStorage("setup");s.account_data=!0,this._messageService.sendSetupApp(s)}}static#t=this.\u0275fac=function(e){return new(e||a)(t.Y36(f.f),t.Y36(c.l),t.Y36(v.e),t.Y36(w.V),t.Y36(P.s))};static#s=this.\u0275cmp=t.Xpm({type:a,selectors:[["app-general"]],decls:2,vars:3,consts:[[4,"ngIf"],[3,"path","file","submit"],[3,"data","defaultImage","uploadEmitter"]],template:function(e,n){1&e&&(t.YNc(0,S,2,2,"div",0),t.TgZ(1,"app-dynamic-forms",1),t.NdJ("submit",function(r){return n.submit(r)}),t.qZA()),2&e&&(t.Q6J("ngIf",n.data),t.xp6(1),t.Q6J("path",n.path)("file",n.file))},dependencies:[d.O5,l.b,C.M]})}return a})();var I=o(4398);let T=(()=>{class a{constructor(s,e,n){this._service=s,this._toastr=e,this._translate=n,this.path="pages/account-settings",this.file="change-password.json"}resetPassword(s){console.log(s),s.oldPassword===s.newPassword?this._toastr.showWarningCustom(this._translate.instant("resetPassword.oldAndNewPasswordCannotBeSame")):s.newPassword!==s.repeatNewPassword?this._toastr.showWarningCustom(this._translate.instant("resetPassword.passwordsNeedToBeSame")):this._service.callPostMethod("/api/changePassword",s).subscribe(e=>{e?this._toastr.showSuccessCustom(this._translate.instant("resetPassword.successfulyChangedPassword")):this._toastr.showWarningCustom(this._translate.instant("resetPassword.oldPasswordIsWrong"))})}static#t=this.\u0275fac=function(e){return new(e||a)(t.Y36(f.f),t.Y36(c.l),t.Y36(I.sK))};static#s=this.\u0275cmp=t.Xpm({type:a,selectors:[["app-change-password"]],decls:1,vars:2,consts:[[3,"path","file","submit"]],template:function(e,n){1&e&&(t.TgZ(0,"app-dynamic-forms",0),t.NdJ("submit",function(r){return n.resetPassword(r)}),t.qZA()),2&e&&t.Q6J("path",n.path)("file",n.file)},dependencies:[l.b]})}return a})(),A=(()=>{class a{constructor(){this.path="pages/account-settings",this.file="information.json"}static#t=this.\u0275fac=function(e){return new(e||a)};static#s=this.\u0275cmp=t.Xpm({type:a,selectors:[["app-information"]],decls:1,vars:2,consts:[[3,"path","file"]],template:function(e,n){1&e&&t._UZ(0,"app-dynamic-forms",0),2&e&&t.Q6J("path",n.path)("file",n.file)},dependencies:[l.b]})}return a})();var g=o(202),M=o(930),J=o(1463);const Y=[{path:"general",component:y},{path:"change-password",component:T},{path:"information",component:A}];let Z=(()=>{class a{static#t=this.\u0275fac=function(e){return new(e||a)};static#s=this.\u0275mod=t.oAB({type:a});static#e=this.\u0275inj=t.cJS({providers:[c.l],imports:[d.ez,h.M,u.Z,m.Bz.forChild(Y),g.w,M.Q,J._,m.Bz,h.M,u.Z,g.w]})}return a})()}}]);